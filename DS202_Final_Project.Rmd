---
title: "Proposal Draft 1"
authors: ["Abhay", "Srika","Neha","Esha","Niharika"]
date: "2023-11-12"
output: html_document
editor_options: 
  markdown: 
    wrap: sentence
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

```{r, child=c('DF1-Employment.Rmd','DF2-Education.Rmd','DF3-Citizenship.Rmd','DF4-Age.Rmd','DF5-Housing.Rmd','DF6-Disabilities.Rmd')}
```


### \*\*Project Title: Income and employment for the various county's in USA\*



```{r}
#census_api_key(Sys.getenv("CENSUS_API_KEY"), install = TRUE)
```

```{r}
#install.packages("tidycensus")
# Load necessary libraries
library(tidycensus)
library(dplyr)
library(tidyr)

#install.packages("factoextra")
library(factoextra)

#install.packages("ggplot2")
#install.packages("usmap")
#install.packages("maps")
library(ggplot2)
library(usmap)
library(maps)
```




# Plan for Data Exploration

-   What we have done so far:
    -   Pulled the required ACS 2021 1 year data using a API call
    -   Cleaned the data
    -   Transformed to long format and formatted the table by focusing on the estimates we will be using.
-   We took the ACS 1 year data for the variables:
    -   EMPLOYMENT
    -   Education
    -   Citizenship
    -   Housing
    -   Age
    -   Disabilities
-   We are trying to see the relationship for the various with the employment fo reach state in the US.
-   We are planning to make some visualization like the above drafts which could inform the audience about the factors affecting the employment in various states in the US.

```{r}
merged_data <- df1_wide %>%
  left_join(df2_wide, by = "NAME") %>%
  left_join(df3_wide, by = "NAME")%>%
  left_join(df4_wide, by = "NAME")%>%
  left_join(df5_wide, by = "NAME")%>%
  left_join(df6_wide, by = "NAME")


columns_to_drop <- c('Total.x', 'Total.y', 'Total.x.x', 'Total.y.y')
merged_data <- merged_data[, !(names(merged_data) %in% columns_to_drop)]

colnames(merged_data)
```

### **\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*** 

### **Title**

**"Socio-Economic Factors Influencing Employment in the United States: A Comprehensive State-by-State Analysis"**

### **Thesis**

This project aims to analyze the impact of various socio-economic factors such as education, age, citizenship status, housing, and disabilities on employment rates across different states in the United States.
Using data from the American Community Survey (ACS) 2021, the study will employ statistical techniques to identify correlations, trends, and patterns, thereby providing insights into the multifaceted nature of employment dynamics in the US.

### **Roadmap and Code for Next Steps**

1.  **Data Exploration and Cleaning**

    -   Continue with data cleaning and handling missing values.

    -   Normalize the data if required for better comparison.

```{r}
# Checking for missing values
sum(is.na(merged_data))

# Handling missing values (example: replacing with median)
merged_data <- merged_data %>% 
  mutate_at(vars(-group_cols()), ~ifelse(is.na(.), median(., na.rm = TRUE), .))

# Normalizing the data (example: Min-Max Scaling)
normalize <- function(x) {
  return ((x - min(x)) / (max(x) - min(x)))
}

merged_data_normalized <- as.data.frame(lapply(merged_data[, sapply(merged_data, is.numeric)], normalize))

```


2.  **Exploratory Data Analysis (EDA)**

    -   Generate summary statistics and visualizations for each dataset to understand distributions and detect outliers.

    -   Explore the relationships between different variables using scatter plots, box plots, etc.
    
```{r}
# Summary Statistics
summary(merged_data)

# Load necessary library
library(ggplot2)
library(rlang)

# Loop through each column in the dataframe
for (i in names(merged_data)) {
  # Convert column name to a symbol
  col_sym <- sym(i)

  # Check if the column is numeric for histograms
  if (is.numeric(merged_data[[i]])) {
    p <- ggplot(merged_data, aes(x = !!col_sym)) + 
      geom_histogram(bins = 30, fill = "blue", color = "black") +
      theme_minimal() +
      labs(title = paste("Histogram of", i), x = i, y = "Frequency")
    
  # If not numeric, use bar plot for categorical data
  } else {
    p <- ggplot(merged_data, aes(x = !!col_sym)) +
      geom_bar(fill = "blue", color = "black") +
      theme_minimal() +
      labs(title = paste("Bar Plot of", i), x = i, y = "Count") +
      theme(axis.text.x = element_text(angle = 90, hjust = 1)) # Rotate x labels for readability
  }

  # Print the plot
  print(p)
}



```


3.  **Correlation Analysis**

    -   Calculate correlation matrices for the variables related to employment, education, age, etc., to identify strong correlations.
```{r}
# Correlation Matrix
correlation_matrix <- cor(merged_data[, sapply(merged_data, is.numeric)], use = "complete.obs")
corrplot::corrplot(correlation_matrix, method = "circle")

```


4.  **Statistical Testing**

    -   Conduct hypothesis testing (e.g., t-tests, ANOVA) to determine if differences in employment rates across different groups (like age groups, educational levels) are statistically significant.
    



5.  **Predictive Modeling**

    -   Build regression models to predict employment rates based on other variables.

    -   Explore other predictive models if applicable (e.g., decision trees, random forests).


6.  **Clustering Analysis**

    -   Use k-means or hierarchical clustering to find patterns or groups in the data based on socio-economic factors.


7.  **Data Visualization and Mapping**

    -   Create comprehensive visualizations and maps to represent the findings. For instance, use **`ggplot2`** and **`usmap`** for spatial data representation.


8.  **Interpretation and Conclusion**

    -   Interpret the results from the statistical analyses and models.

    -   Draw conclusions about the socio-economic factors affecting employment.

9.  **Reporting**

    -   Compile the results and interpretations into a final report or presentation.
