---
title: "Proposal Draft 1"
authors: ["Abhay", "Srika","Neha","Esha","Niharika"]
date: "2023-11-12"
output: html_document
editor_options: 
  markdown: 
    wrap: sentence
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```

```{r, child=c('DF1-Employment.Rmd','DF2-Education.Rmd','DF3-Citizenship.Rmd','DF4-Age.Rmd','DF5-Housing.Rmd','DF6-Disabilities.Rmd')}
```





```{r}
#census_api_key(Sys.getenv("CENSUS_API_KEY"), install = TRUE)
```

```{r}
#install.packages("tidycensus")
# Load necessary libraries
library(tidycensus)
library(dplyr)
library(tidyr)

#install.packages("factoextra")
library(factoextra)

#install.packages("ggplot2")
#install.packages("usmap")
#install.packages("maps")
library(ggplot2)
library(usmap)
library(maps)
```




# Plan for Data Exploration

-   What we have done so far:
    -   Pulled the required ACS 2021 1 year data using a API call
    -   Cleaned the data
    -   Transformed to long format and formatted the table by focusing on the estimates we will be using.
-   We took the ACS 1 year data for the variables:
    -   EMPLOYMENT
    -   Education
    -   Citizenship
    -   Housing
    -   Age
    -   Disabilities
-   We are trying to see the relationship for the various with the employment fo reach state in the US.
-   We are planning to make some visualization like the above drafts which could inform the audience about the factors affecting the employment in various states in the US.

```{r}
merged_data <- df1_wide %>%
  left_join(df2_wide, by = "NAME") %>%
  left_join(df3_wide, by = "NAME")%>%
  left_join(df4_wide, by = "NAME")%>%
  left_join(df5_wide, by = "NAME")%>%
  left_join(df6_wide, by = "NAME")


columns_to_drop <- c('Total.x', 'Total.y', 'Total.x.x', 'Total.y.y')
merged_data <- merged_data[, !(names(merged_data) %in% columns_to_drop)]

colnames(merged_data)
```



### **Title**

**"Socio-Economic Factors Influencing Employment in the United States: A Comprehensive State-by-State Analysis"**

### **Thesis**

This project aims to analyze the impact of various socio-economic factors such as education, age, citizenship status, housing, and disabilities on employment rates across different states in the United States.
Using data from the American Community Survey (ACS) 2021, the study will employ statistical techniques to identify correlations, trends, and patterns, thereby providing insights into the multifaceted nature of employment dynamics in the US.

### **Roadmap and Code for Next Steps**

1.  **Data Exploration and Cleaning**

    -   Continue with data cleaning and handling missing values.

    -   Normalize the data if required for better comparison.


```{r}
#Check for Missing Values
# Checking the number of missing values in each column
summarize_missing_data <- function(data) {
  sapply(data, function(x) sum(is.na(x)))
}

missing_data_summary <- summarize_missing_data(merged_data)
missing_data_summary

```


```{r}
# Handling missing values
handle_missing_values <- function(data) {
  for (col in colnames(data)) {
    if (is.numeric(data[[col]])) {
      data[[col]] <- ifelse(is.na(data[[col]]), median(data[[col]], na.rm = TRUE), data[[col]])
    }
    # Add other conditions if needed for categorical data
  }
  return(data)
}

merged_data <- handle_missing_values(merged_data)

```

```{r}
# Function to normalize only numeric columns
normalize_data <- function(data) {
  for (col in colnames(data)) {
    if (is.numeric(data[[col]])) {
      min_val <- min(data[[col]], na.rm = TRUE)
      max_val <- max(data[[col]], na.rm = TRUE)
      data[[col]] <- (data[[col]] - min_val) / (max_val - min_val)
    }
  }
  return(data)
}

# Apply the normalization function to the merged_data
normalized_data <- normalize_data(merged_data)

```

```{r}
# Create a new dataset with only numeric columns
numeric_data <- normalized_data[sapply(normalized_data, is.numeric)]

# Compute the correlation matrix
correlation_matrix <- cor(numeric_data, use = "complete.obs")

# Use corrplot to visualize
library(corrplot)
corrplot(correlation_matrix, method = "circle")



```

```{r}
# Example: Comparing Education and Employment Rates
ggplot(normalized_data, aes(x = `Education_Bachelors_degree`, y = EmploymentRate)) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(title = "Relation between Bachelors Degree Holders and Employment Rate", x = "Percentage of Bachelors Degree Holders", y = "Employment Rate")

```
```{r}
#Perform statistical tests (e.g., t-tests, ANOVA) to see if differences in socio-economic factors among states are statistically significant.
# Example: T-test for comparing employment rates in states with high vs low education levels
high_education_states <- normalized_data$`Education_Bachelors_degree` > median(normalized_data$`Education_Bachelors_degree`)
t.test(normalized_data$EmploymentRate ~ high_education_states)

```
```{r}
# Linear regression model as an example
model <- lm(EmploymentRate ~ ., data = normalized_data)
summary(model)

```

