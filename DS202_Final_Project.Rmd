---
title: "Proposal Draft 1"
authors: "Abhay Prasanna Rao, Srika Raja"
date: "2023-11-12"
output: html_document
editor_options: 
  markdown: 
    wrap: sentence
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

### \*\*Project Title: Income and employment for the various county's in USA\*

```{r}
#install.packages("tidycensus")
library(tidycensus)
```

```{r}
#census_api_key(Sys.getenv("CENSUS_API_KEY"), install = TRUE)
```

```{r}
df1 <- get_acs(geography = "county", 
                table = "K200101", 
                year = 2021, 
                survey = "acs1/subject",cache_table = TRUE)
```





### [**Project Idea Update:**]{.underline}

#### [Description of the Data Set 1:]{.underline}

-   **Source**: 2022 American Community Survey (ACS) 1-Year Estimates.

-   **Focus**: Total population by sex in different geographic areas.

-   **Variables**: Population estimates by sex, geographic identifiers, and margin of error.

#### Adjusted Data Cleaning Steps:

1.  Inspecting the data

    ```{r}
    head(df1)

    ```

2.  **Handle Missing Values**
    ```{r}
    df1 <- na.omit(df1)  # This removes rows with NA values
    ```

3.  Address Special Symbols
```{r}
df1[df1 == '-'] <- NA
df1[df1 == 'N'] <- NA
df1[df1 == '(X)'] <- NA
```

4. Standardize GEOID and Variable Names
```{r}
df1$GEOID <- as.factor(df1$GEOID)
df1$variable <- as.factor(df1$variable)
```



####  

#### Updated Marginal Summaries:
```{r}
summary(df1)
```


-   **Population Breakdown**: Summarize population counts by sex across different regions.
```{r}
library(dplyr)
population_breakdown <- df1 %>%
  group_by(NAME, variable) %>%
  summarize(Total_Population = sum(estimate, na.rm = TRUE))

population_breakdown

```


-   **Error Analysis**: Evaluate the impact of margin of error on population estimates.
```{r}

error_analysis <- df1 %>%
  filter(!is.na(moe)) %>%  # Filter out rows where moe is NA
  mutate(Percent_MOE = (moe / estimate) * 100) %>%  # Calculate percent MOE
  summarize(Average_MOE = mean(Percent_MOE, na.rm = TRUE))  # Average MOE

error_analysis

```

Further, we are going to take different variables(employment and income) and then combine them by the same counties. 